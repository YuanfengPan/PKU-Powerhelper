
# PKU Powerhelper 技术文档

\*\*项目名称：\*\*PKU Powerhelper——北京大学教学楼插座信息查询系统
\*\*开发语言/框架：\*\*C++，基于 Qt 框架（Qt Widgets 模块）开发
\*\*目标平台：\*\*Windows 桌面端（Qt 可支持跨平台）

---

## 一、项目概述

PKU Powerhelper 是一个为北京大学学生设计的**教学楼插座位置可视化查询工具**，帮助用户在校园内快速找到带有合适插座的教室座位，从而提高自习与办公效率。

**开发动机：**

* 插座资源分布分散，学生尤其是新生很难第一时间找到合适座位
* 设备电量需求增加（笔记本、手机、平板等），对插座的依赖性增强
* 缺乏统一的平台对插座资源进行整合与管理

**功能概览：**

* 显示校园教学楼（如二教、理教）的各层平面图
* 标注每间教室的插座数量、类型及分布位置
* 可筛选特定插座类型或数量，快速定位目标教室
* 后续可扩展为接入动态插座使用数据

**插座类型编码说明：**

| 编码 | 含义        |
| -- | --------- |
| A  | 5孔插座      |
| B  | 7孔插座      |
| C  | 10孔插座     |
| D  | 5孔 + USB口 |
| E  | 5孔（其他型号）  |
| F  | 特殊5孔      |

---

## 二、源码结构说明

仓库地址：[https://github.com/YuanfengPan/PKU-Powerhelper](https://github.com/YuanfengPan/PKU-Powerhelper)

### 主体结构：

| 文件/模块名                      | 作用描述                               |
| --------------------------- | ---------------------------------- |
| `mainwindow.cpp/h`          | 主窗口类，管理主页面跳转与界面布局，加载教室地图与插座信息      |
| `welcome.cpp/h`             | 欢迎界面类，负责启动欢迎页和项目介绍                 |
| `classroom.cpp/h`           | 教室模型类，封装教室中插座的具体属性与显示逻辑            |
| `erjiao*.cpp/h`             | 二教各楼层模块（1\~4层），每层为一个独立界面类          |
| `lijiao.cpp/h`              | 理教模块，展示理教插座布局                      |
| `moc_*.cpp/o`               | Qt 自动生成的 Meta-Object 编译文件，支持信号与槽机制 |
| `*.o`                       | 编译生成的目标文件                          |
| `lib*.dll`                  | 编译器（如 MinGW）依赖库，运行时需打包带上           |
| `qmake_qmake_immediate.qrc` | Qt 资源文件，打包图像与图标等资源进入可执行文件          |
| `pkupowerhelper.exe`        | 项目最终可执行文件，点击即可运行                   |

### 技术栈说明：

* 使用 Qt Designer 制作 UI 界面（`.ui` 文件）
* 使用 Qt 的 Graphics View 框架管理教室平面图和插座图标（基于 `QGraphicsScene` 和 `QGraphicsView`）
* 信号与槽用于交互（如点击按钮、高亮教室等）

---

## 三、核心功能详解

### 1. 地图显示与插座标注

* 每个教室以图像方式展示其空间布局
* 插座在图中以图标或颜色标注，具体位置精确到墙角、讲台边等
* 插座图标样式区分类型（如两孔/三孔/USB）

### 2. 类型高亮与筛选功能

* 用户可选择筛选条件，如“显示USB插座的教室”或“插座≥6个的教室”
* 满足条件的教室将在地图上高亮显示，便于快速定位

### 3. 插座类型编码与图示

* 插座图标通过 `.qrc` 打包资源系统管理，图标路径使用 `:/icons/*.png`
* 各类插座由内部编码（A-F）统一管理，便于后续维护与拓展

### 4. 离线运行与数据管理

* 所有资源（地图、图标、教室信息）本地存储，无需联网
* 插座信息通过代码内置或数据文件静态管理，支持未来对接动态 API

---

## 四、部署说明


   ```bash
   git clone https://github.com/YuanfengPan/PKU-Powerhelper.git
   ```
1. 将`platforms.rar`和`imagesformat.rar`解压到项目根目录
2. 运行 `pkupowerhelper.exe`

## 六、数据来源与未来扩展

### 当前数据来源

* 由开发团队实地调研 + 同学反馈
* 数据静态保存，维护简单可靠

### 扩展方向

* 接入实时插座使用数据（如检测是否插入电器）//好难
* 开放数据接口供校内系统接入（如选座系统）//好难
* 增加手机端应用同步功能 //好难

---

## 七、开发团队
|人|干了啥|
|---------------------|-----------|
|pku-ccme->xk24-pyh |负责主要程序开发与界面实现：欢迎界面、教学楼地图界面、各楼层插座展示模块（Erjiao1~4、Lijiao）、教室插座信息的图形标注、互动|
| pku-ccme21-zyj|实地调查与整理二教、理教等教学楼内的插座类型与分布信息、规范化插座数据格式，统计插座数量并按类型分类、编写原始插座信息表，为界面开发提供数据支持 |
|pku-xk24-yjy|搜集并整理教学楼地图图片、插座图标素材等资源、参与 UI 风格讨论、接口样式统一、图标样式选择|
